var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function i(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function d(){return h(" ")}function u(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function f(t,e){e=""+e,t.data!==e&&(t.data=e)}function m(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}class g{constructor(t,e=null){this.e=i("div"),this.a=e,this.u(t)}m(t,e=null){for(let n=0;n<this.n.length;n+=1)r(t,this.n[n],e);this.t=t}u(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}p(t){this.d(),this.u(t),this.m(this.t,this.a)}d(){this.n.forEach(l)}}let k;function $(t){k=t}const b=[],y=[],v=[],w=[],S=Promise.resolve();let x=!1;function _(t){v.push(t)}function C(){const t=new Set;do{for(;b.length;){const t=b.shift();$(t),T(t.$$)}for(;y.length;)y.pop()();for(let e=0;e<v.length;e+=1){const n=v[e];t.has(n)||(n(),t.add(n))}v.length=0}while(b.length);for(;w.length;)w.pop()();x=!1}function T(t){t.fragment&&(t.update(t.dirty),o(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(_))}const M=new Set;function H(t,e){t.$$.fragment&&(o(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function N(t,e){t.$$.dirty||(b.push(t),x||(x=!0,S.then(C)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function I(c,a,r,l,i,h){const d=k;$(c);const u=a.props||{},p=c.$$={fragment:null,ctx:null,props:h,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:null};let f=!1;var m,g,b;p.ctx=r?r(c,u,(t,e,n=e)=>(p.ctx&&i(p.ctx[t],p.ctx[t]=n)&&(p.bound[t]&&p.bound[t](n),f&&N(c,t)),e)):u,p.update(),f=!0,o(p.before_update),p.fragment=l(p.ctx),a.target&&(a.hydrate?p.fragment.l((b=a.target,Array.from(b.childNodes))):p.fragment.c(),a.intro&&((m=c.$$.fragment)&&m.i&&(M.delete(m),m.i(g))),function(t,n,c){const{fragment:a,on_mount:r,on_destroy:l,after_update:i}=t.$$;a.m(n,c),_(()=>{const n=r.map(e).filter(s);l?l.push(...n):o(n),t.$$.on_mount=[]}),i.forEach(_)}(c,a.target,a.anchor),C()),$(d)}let L;"undefined"!=typeof HTMLElement&&(L=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});class O{$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function E(t,e,n){const o=Object.create(t);return o.slide=e[n],o.i=n,o}function D(t){var e,n,s,c,m,g,k,$,b,y,v,w,S,x,_,C,T,M,H,N,I,L,O,D,W,j,P,U,R=t.role.toUpperCase()+"",q=t.String(t.seconds).toHHMMSS()+"";let B=t.slides,z=[];for(let e=0;e<B.length;e+=1)z[e]=A(E(t,B,e));function F(t,e){return"start"===e.stopwatchState?K:J}var G=F(0,t),Q=G(t);return{c(){e=i("div"),n=i("div"),s=i("span"),c=h(R),m=d(),g=i("div"),k=h("Channel ID\n      "),$=i("strong"),b=h(t.channelID),y=d(),v=i("div"),w=h(q),_=d(),C=i("div");for(let t=0;t<z.length;t+=1)z[t].c();T=d(),M=i("div"),H=i("div"),(N=i("button")).innerHTML='<span class="fa fa-home"></span>',I=d(),L=i("button"),Q.c(),D=d(),(W=i("button")).innerHTML='<span class="fa fa-undo"></span>',j=d(),(P=i("button")).innerHTML='<span class="fa fa-external-link"></span>',p(n,"class","role svelte-6y019t"),p(g,"class","channel_id svelte-6y019t"),p(v,"class",S="time "+t.stopwatchState+" svelte-6y019t"),p(e,"class",x="clock "+t.stopwatchState+"  svelte-6y019t"),p(C,"class","grid svelte-6y019t"),p(N,"class","button svelte-6y019t"),p(L,"class",O="startstop button "+t.stopwatchState+" svelte-6y019t"),p(W,"class","reset button svelte-6y019t"),p(P,"class","button svelte-6y019t"),p(H,"class","buttonsContainer svelte-6y019t"),p(M,"class","buttons svelte-6y019t"),U=[u(N,"click",t.click_handler_1),u(L,"click",t.click_handler_2),u(W,"click",t.click_handler_3),u(P,"click",t.click_handler_4)]},m(t,o){r(t,e,o),a(e,n),a(n,s),a(s,c),a(e,m),a(e,g),a(g,k),a(g,$),a($,b),a(e,y),a(e,v),a(v,w),r(t,_,o),r(t,C,o);for(let t=0;t<z.length;t+=1)z[t].m(C,null);r(t,T,o),r(t,M,o),a(M,H),a(H,N),a(H,I),a(H,L),Q.m(L,null),a(H,D),a(H,W),a(H,j),a(H,P)},p(t,n){if(t.role&&R!==(R=n.role.toUpperCase()+"")&&f(c,R),t.seconds&&q!==(q=n.String(n.seconds).toHHMMSS()+"")&&f(w,q),t.stopwatchState&&S!==(S="time "+n.stopwatchState+" svelte-6y019t")&&p(v,"class",S),t.stopwatchState&&x!==(x="clock "+n.stopwatchState+"  svelte-6y019t")&&p(e,"class",x),t.slides){let e;for(B=n.slides,e=0;e<B.length;e+=1){const o=E(n,B,e);z[e]?z[e].p(t,o):(z[e]=A(o),z[e].c(),z[e].m(C,null))}for(;e<z.length;e+=1)z[e].d(1);z.length=B.length}G!==(G=F(0,n))&&(Q.d(1),(Q=G(n))&&(Q.c(),Q.m(L,null))),t.stopwatchState&&O!==(O="startstop button "+n.stopwatchState+" svelte-6y019t")&&p(L,"class",O)},d(t){t&&(l(e),l(_),l(C)),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(z,t),t&&(l(T),l(M)),Q.d(),o(U)}}}function W(e){var n,o,s,c,h,f,g,k,$,b,y,v,w,S,x,_,C,T,M,H,N,I,L,O;return{c(){n=i("div"),o=i("div"),(s=i("button")).textContent="NEW TALK",c=d(),(h=i("h1")).textContent="Clicker!",f=d(),(g=i("h3")).textContent="The problem",k=d(),($=i("p")).textContent="When giving a talk containing slides, it’s often challenging for the\n      speaker to direct the brother on console to advance to the next slide—or\n      to a particular slide. And when the brother on console does display the\n      desired slide, it’s not always obvious to the speaker that the slide is\n      now on-screen. This coordination between speaker and console can be\n      awkward and, more importantly, distracting to the audience. That’s where\n      Clicker comes in.",b=d(),y=i("img"),v=d(),(w=i("h3")).textContent="What Clicker does",S=d(),(x=i("p")).textContent="Clicker lets the speaker communicate to the brother on console which slide\n      to present. Clicker also informs the speaker exactly when the slide is\n      on-screen.",_=d(),(C=i("h3")).textContent="How Clicker works",T=d(),(M=i("p")).innerHTML='\n\t\t\t      The speaker visits\n\t\t\t      <strong><a href="https://renefournier.com/clicker">\n\t\t\t          https://renefournier.com/clicker\n\t\t\t        </a></strong>\n\t\t\t      and clicks the\n\t\t\t      <strong>New Talk</strong>\n\t\t\t      button. The Clicker interface appears. Note the six-digit channel ID at\n\t\t\t      the top-right. The speaker asks the console brother to visit\n\t\t\t      <a href="https://renefournier.com/clicker">\n\t\t\t        https://renefournier.com/clicker\n\t\t\t      </a>\n\t\t\t      , click NEW TALK, click the Open Link button at the bottom-right, enter\n\t\t\t      the channel ID and click OK. Now the brother on console is linked to the\n\t\t\t      speaker. When the speaker taps slide 4, slide 4 lights up on the console\n\t\t\t      brother’s phone. The brother on console displays slide 4, then taps 4\n\t\t\t      again—and now a checkmark appears beside the 4.\n\t\t\t    ',H=d(),(N=i("h3")).textContent="One more thing...",I=d(),(L=i("p")).textContent="Sometimes, when delivering a talk a different Kingdom Hall, I’ve found the\n      lectern to be missing timer or stopwatch. So, a simple stopwatch is\n      included in Clicker.",m(o,"float","right"),p(h,"class","brand"),p(y,"src","clicker.png"),p(y,"alt","Clicker"),m(y,"float","right"),m(y,"padding","20px"),p(n,"class","main"),O=u(s,"click",P)},m(t,e){r(t,n,e),a(n,o),a(o,s),a(n,c),a(n,h),a(n,f),a(n,g),a(n,k),a(n,$),a(n,b),a(n,y),a(n,v),a(n,w),a(n,S),a(n,x),a(n,_),a(n,C),a(n,T),a(n,M),a(n,H),a(n,N),a(n,I),a(n,L)},p:t,d(t){t&&l(n),O()}}}function A(t){var e,n,o,s,c,h=t.slide.p?'<span class="fa fa-check brand"></span>':t.i+1+"";function f(){return t.click_handler(t)}return{c(){e=i("div"),o=d(),n=new g(h,o),p(e,"class",s="cell "+(t.slide.s?"selected":"")+" svelte-6y019t"),c=u(e,"click",f)},m(t,s){r(t,e,s),n.m(e),a(e,o)},p(o,c){t=c,o.slides&&h!==(h=t.slide.p?'<span class="fa fa-check brand"></span>':t.i+1+"")&&n.p(h),o.slides&&s!==(s="cell "+(t.slide.s?"selected":"")+" svelte-6y019t")&&p(e,"class",s)},d(t){t&&l(e),c()}}}function J(t){var e;return{c(){p(e=i("span"),"class","fa fa-pause")},m(t,n){r(t,e,n)},d(t){t&&l(e)}}}function K(t){var e;return{c(){p(e=i("span"),"class","fa fa-play")},m(t,n){r(t,e,n)},d(t){t&&l(e)}}}function j(e){var n;var o=function(t,e){return e.channelID?D:W}(0,e)(e);return{c(){o.c(),n=h("")},m(t,e){o.m(t,e),r(t,n,e)},p(t,e){o.p(t,e)},i:t,o:t,d(t){o.d(t),t&&l(n)}}}function P(){let t=String(Math.round(1e9*Math.random())).substr(0,6);history.replaceState(null,null," "),location=`#${t}`,location.reload()}function U(t,e,n){let{name:o}=e,s=[],c=!1,a=window.document.location.hash.substr(1),r="";setInterval(function(){c&&n("seconds",p+=1)},1e3);function l(){n("sweeping",c=!1),n("seconds",p=0)}function i(){n("sweeping",c=!c)}String.prototype.toHHMMSS=function(){var t=parseInt(this,10),e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),o=t-3600*e-60*n;return e<10&&(e="0"+e),n<10&&(n="0"+n),o<10&&(o="0"+o),e+":"+n+":"+o};let h="ws://localhost:2424";h="wss://renefournier.com/clicker/ws";const d=`wss://renefournier.com/clicker/ws?channel=${encodeURIComponent(a)}`;let u;a&&(window.connection=new WebSocket(d),connection.onopen=(()=>{u=new Date;setInterval(()=>{connection.send(JSON.stringify({cmd:"ping"}))},15e3)}),connection.onclose=(t=>{let e=(new Date-u)/1e3;console.log(`xxx WebSocket closed: ${JSON.stringify(t)} after ${e} seconds`),setTimeout(function(){location.reload()},2e3)}),connection.onerror=(t=>{console.log(`!!! WebSocket error: ${JSON.stringify(t)}`)}),connection.onmessage=(t=>{const e=JSON.parse(t.data);switch(console.log("--\x3e",e),e.cmd){default:console.log(" -- ?? --");break;case"state":n("role",r=e.role),n("slides",s=e.state)}}));let p,f;return t.$set=(t=>{"name"in t&&n("name",o=t.name)}),t.$$.update=((t={sweeping:1})=>{t.sweeping&&n("stopwatchState",f=c?"pause":"start")}),n("seconds",p=0),{name:o,slides:s,channelID:a,role:r,handleReset:l,handleStartStop:i,seconds:p,stopwatchState:f,String:String,click_handler:({i:t})=>(function(t){let e=parseInt(t);if(connection){var n={cmd:"tap",slide:e};connection.send(JSON.stringify(n))}})(t+1),click_handler_1:()=>(function(){let t=`${location.origin}${location.pathname}`;history.replaceState(null,null," "),location=t,location.reload()})(),click_handler_2:()=>i(),click_handler_3:()=>l(),click_handler_4:()=>(function(){history.replaceState(null,null," ");let t=prompt("Please enter the six-digit channel ID",""),e=`${location.origin}${location.pathname}#${t}`;location=e,location.reload()})()}}return new class extends O{constructor(t){super(),I(this,t,U,j,c,["name"])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
